{{- with .cxt }} {{/* Apply proper context from dict */}}
{{- if (and .Params.cover.image (not $.isHidden)) }}
{{- $alt := (.Params.cover.alt | default .Params.cover.caption | default "cover image") }}
<figure class="entry-cover">
    {{- $responsiveImages := (.Resources.ByType "image").GetMatch (printf "**%s" (.Params.cover.image)) }}
    {{- if $responsiveImages }}
        {{- $responsiveImages := $responsiveImages.Resize "720x" }}
        <img loading="lazy" src="{{ $responsiveImages.Permalink }}" alt="{{ $alt }}">
    {{- else }}
        {{- $img := .Params.cover.image }}
        {{- if not (hasPrefix $img "/") }}
            {{- $img = printf "%s%s" .Permalink $img }}
        {{- end }}
        <img loading="lazy" src="{{ $img }}" alt="{{ $alt }}">
    {{- end }}
</figure>
{{- end }}
{{- end }}
